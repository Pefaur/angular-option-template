{"version":3,"sources":["../../../../../../src/app/user/register/form-register/form-register.component.ts"],"names":[],"mappings":"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","file":"form-register.component.js","sourceRoot":"","sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { OptFormComponent, OptUser, OptAuthService, OptResponse } from '@option/core';\nimport { ISubscription } from 'rxjs/Subscription';\n\n// @Component({\n//   selector: 'opt-form-register',\n//   templateUrl: './form-register.component.html',\n//   styleUrls: ['./form-register.component.scss']\n// })\nexport class OptFormRegisterComponent extends OptFormComponent implements OnInit, OnDestroy {\n\n  requestSubscribes: ISubscription[];\n\n  SERVER_MESSAGES: any = {\n    401: 'Invalid user or password.'\n  };\n\n  formErrors: any = {\n    firstName: '',\n    lastName: '',\n    email: '',\n    repeatEmail: '',\n    password: ''\n  };\n\n  VALIDATION_MESSAGES: any = {\n    firstName: {\n      required: 'First name is required'\n    },\n    lastName: {\n      required: 'Last name is required'\n    },\n    email: {\n      required: 'Email is required',\n      email: 'Invalid email'\n    },\n    repeatEmail: {\n      required: 'Confirm email is required',\n      email: 'Invalid confirm email'\n    },\n    password: {\n      required: 'Password is required',\n      minlength: 'Password must be at least 8 characters long'\n    }\n  };\n\n  PLACEHOLDERS: any = {\n    firstName: 'First name',\n    lastName: 'Last name',\n    email: 'Email address',\n    repeatEmail: 'Re-enter email address',\n    password: 'Password'\n  };\n\n  LABELS: any = {\n    name: 'Name',\n    email: 'Email',\n    repeatEmail: 'Re-enter Email',\n    password: 'Password'\n  };\n\n  SUBMIT_LABEL = 'Sign up';\n\n  constructor(protected formBuilder: FormBuilder, protected authService: OptAuthService, protected router: Router) {\n    super(formBuilder);\n    this.formBuilderGroupControlsConfig = {\n      firstName: [\n        null, [Validators.required]\n      ],\n      lastName: [\n        null, [Validators.required]\n      ],\n      email: [\n        null, [Validators.required, Validators.email]\n      ],\n      repeatEmail: [\n        null, [Validators.required, Validators.email]\n      ],\n      password: [\n        null, [Validators.required, Validators.minLength(8)]\n      ]\n    };\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    this.requestSubscribes = [];\n  }\n\n  ngOnDestroy(): void {\n    // unsubscribe requests\n    this.requestSubscribes.map(requestSubscribe => {\n      requestSubscribe.unsubscribe();\n    });\n  }\n\n  submit() {\n    const user = new OptUser();\n    user.setFullName(this.form.value.firstName, this.form.value.lastName);\n    user.username = this.form.value.email;\n    user.password = this.form.value.password;\n    user.email = this.form.value.email;\n    this.requestSubscribes.push(this.authService.register(user)\n      .subscribe(\n        () => {\n          this.router.navigate(['/']);\n        },\n        (response: OptResponse) => {\n          this.setServerMessage(response.statusCode);\n        }\n      )\n    );\n  }\n\n}\n"]}