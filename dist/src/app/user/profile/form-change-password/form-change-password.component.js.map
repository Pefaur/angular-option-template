{"version":3,"sources":["../../../../../../src/app/user/profile/form-change-password/form-change-password.component.ts"],"names":[],"mappings":"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","file":"form-change-password.component.js","sourceRoot":"","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { OptFormComponent, OptPasswordValidation, OptResponse, OptUserService } from '@option/core';\n\n// @Component({\n//   selector: 'opt-form-change-password',\n//   templateUrl: './form-change-password.component.html',\n//   styleUrls: ['./form-change-password.component.scss']\n// })\nexport class OptFormChangePasswordComponent extends OptFormComponent implements OnInit {\n  SERVER_MESSAGES: any = {\n    400: 'The actual password is incorrect.',\n    200: 'Your password was successfully changed.'\n  };\n\n  formErrors: any = {\n    actualPassword: '',\n    password: '',\n    repeatPassword: ''\n  };\n\n  VALIDATION_MESSAGES: any = {\n    actualPassword: {\n      required: 'Actual password is required'\n    },\n    password: {\n      required: 'Password is required',\n      minlength: 'Password must be at least 8 characters long'\n    },\n    repeatPassword: {\n      required: 'Repeat password is required',\n      MatchPassword: 'Passwords must be equal'\n    }\n  };\n\n  PLACEHOLDERS: any = {\n    actualPassword: 'Actual password',\n    password: 'Password',\n    repeatPassword: 'Re-enter password'\n  };\n\n  LABELS: any = {\n    actualPassword: 'Actual password',\n    password: 'Password',\n    repeatPassword: 'Re-enter Password'\n  };\n\n  SUBMIT_LABEL = 'Update';\n\n  constructor(protected formBuilder: FormBuilder, protected userService: OptUserService, protected router: Router) {\n    super(formBuilder);\n    this.formBuilderGroupControlsConfig = {\n      actualPassword: [\n        null, [Validators.required]\n      ],\n      password: [\n        null, [Validators.required, Validators.minLength(8)]\n      ],\n      repeatPassword: [\n        null, [Validators.required]\n      ]\n    };\n\n    this.formBuilderGroupExtra = {\n      validator: OptPasswordValidation.MatchPassword\n    };\n  }\n\n  submit() {\n    const self = this;\n    const actualPassword = self.form.value.actualPassword;\n    const password = self.form.value.password;\n    const repeatPassword = self.form.value.repeatPassword;\n    self.userService.changePassword(actualPassword, password, repeatPassword)\n      .then(function(response: OptResponse) {\n        self.serverMessage.message = self.SERVER_MESSAGES[response.statusCode];\n        self.serverMessage.show = true;\n        self.serverMessage.isStatusOk = true;\n      })\n      .catch(function(response: OptResponse) {\n        self.serverMessage.message = self.SERVER_MESSAGES[response.statusCode];\n        self.serverMessage.show = true;\n        self.serverMessage.isStatusOk = false;\n      });\n  }\n}\n"]}